{% extends 'layout/app_layout.html' %}
{% load static %}
{% block content %}



<!-- for new tabl ajax -->
<script src= 
"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"> 
</script> 
<script src= 
"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"> 
</script> 
<script src= 
"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"> 
</script> 

  <script> 
	$(document).ready(function () { 

	// Denotes total number of rows 
	var rowIdx = 0; 

	// jQuery button click event to add a row 
	$('#addBtn').on('click', function () { 

		// Adding a row inside the tbody. 
		$('#tbody').append(`<tr id="R${++rowIdx}"> 
			<td class="row-index text-center"> 
			<p> ${rowIdx}</p> 
			</td> 

      <td class="pt-3-half" >
        
                  <select class="form-control select2" id="simple-select2">
                    {% for product in products %}   
                    <option value="">{{product.name}}</option>
                      
                      {% endfor %}
                    
                  </select>
                 
                  <br>
                  <a href="#">
                  <span class="fe fe-12 fe-user-plus float-left">&nbsp;Add product</span>
              </a>
      </td>
                <td class="pt-3-half" contenteditable="true" style="text-align: right;"></td>
                <td class="pt-3-half" contenteditable="true"></td>
                <td class="pt-3-half" contenteditable="true"></td>
                <td class="pt-3-half" contenteditable="true"></td>
                <td class="pt-3-half" contenteditable="true"></td>
                <td class="pt-3-half" contenteditable="true"></td>

			<td class="text-center"> 
				<button class="btn btn-danger remove"
				type="button">Remove</button> 
				</td> 
			</tr>`); 
	}); 

	// jQuery button click event to remove a row. 
	$('#tbody').on('click', '.remove', function () { 

		// Getting all the rows next to the row 
		// containing the clicked button 
		var child = $(this).closest('tr').nextAll(); 

		// Iterating across all the rows 
		// obtained to change the index 
		child.each(function () { 

		// Getting <tr> id. 
		var id = $(this).attr('id'); 

		// Getting the <p> inside the .row-index class. 
		var idx = $(this).children('.row-index').children('p'); 

		// Gets the row number from <tr> id. 
		var dig = parseInt(id.substring(1)); 

		// Modifying row index. 
		idx.html(`Row ${dig - 1}`); 

		// Modifying row id. 
		$(this).attr('id', `R${dig - 1}`); 
		}); 

		// Removing the current row. 
		$(this).closest('tr').remove(); 

		// Decreasing total number of rows by 1. 
		rowIdx--; 
	}); 
	}); 
</script> 

<div class="col-lg-12 col-md-6">
  <div class="card shadow mb-4">
    <div class="card-body">
      
      <div class="form-row">
        <div class="form-group col-md-4">
          <p class="mb-2"><strong>Select Supplier</strong></p>
          <!-- Dropdown --> 
          
          <select id='selUser' style='width: 200px;'>
            {% for supplier in suppliers%}
              <option value=''>{{supplier.supplier_name}}</option> 
              {% endfor %}
          </select>
         
          <br>
          <a href="#">
          <span class="fe fe-12 fe-user-plus">&nbsp;Add Supplier</span>
          </a>

         </div>
        
         <div class="form-group col-md-4">
          <p class="mb-2"><strong>Bill Number</strong></p>
              <input type="text" class="form-control" name="color" id="exampleInputEmail1" aria-describedby="emailHelp" required>
              <div class="invalid-feedback"> Please use a valid email </div>
         </div>
         <div class="form-group col-md-4">
          <p class="mb-2"><strong>Date</strong></p>
              <input type="date" class="form-control" name="color" id="exampleInputEmail1" aria-describedby="emailHelp" required>
              <div class="invalid-feedback"> Please use a valid email </div>
         </div>
         </div> 
         </div>
         </div>
         </div>


<div class="container pt-4"> 
	<div class="table-responsive"> 
	<table class="table table-bordered"> 
		<thead> 
		<tr> 
			<th class="text-center">SI</th>
              <th class="text-center">DIscription of Goods</th>
              <th class="text-center">HSN/SAC</th>
              <th class="text-center">Quantity</th>
              <th class="text-center">Rate</th>
              <th class="text-center">PC</th>
              <th class="text-center">Disc %</th>
              <th class="text-center">Amount</th>
              <th class="text-center">Remove</th> 
		</tr> 
		</thead> 
		<tbody id="tbody"> 

		</tbody> 
	</table> 
	</div> 
	<button class="btn btn-md btn-primary"
	id="addBtn" type="button"> 
		Add new Item
	</button> 
</div> 
  {% endblock %}